{"ast":null,"code":"import Vue from \"vue\";\nimport Router from \"vue-router\";\nimport store from \"../store\";\nimport TopIndex from \"../pages/top\";\nimport SubordinateIndex from \"../pages/subordinates\";\nimport SubordinateDetail from \"../pages/subordinate\";\nimport RegisterIndex from \"../pages/register/index\";\nimport LoginIndex from \"../pages/login/index\";\nimport ProfileEdit from \"../pages/profile/edit\";\nimport EverydayBehaviorRegister from \"../pages/everyday_behaviors/register\";\nimport EverydayBehaviorIndex from \"../pages/everyday_behaviors/index\";\nVue.use(Router);\nvar router = new Router({\n  mode: \"history\",\n  routes: [{\n    path: \"/\",\n    component: TopIndex,\n    name: \"TopIndex\"\n  }, {\n    path: \"/subordinates\",\n    component: SubordinateIndex,\n    name: \"SubordinateIndex\",\n    meta: {\n      requiredAuth: true\n    }\n  }, {\n    path: \"/everyday_behavior_register\",\n    component: EverydayBehaviorRegister,\n    name: \"EverydayBehaviorRegister\",\n    meta: {\n      requiredAuth: true\n    }\n  }, {\n    path: \"/everyday_behavior_index\",\n    component: EverydayBehaviorIndex,\n    name: \"EverydayBehaviorIndex\",\n    meta: {\n      requiredAuth: true\n    }\n  }, {\n    path: \"/register\",\n    component: RegisterIndex,\n    name: \"RegisterIndex\"\n  }, {\n    path: \"/login\",\n    component: LoginIndex,\n    name: \"LoginIndex\"\n  }, {\n    path: \"/profile_edit\",\n    component: ProfileEdit,\n    name: \"ProfileEdit\",\n    meta: {\n      requiredAuth: true\n    }\n  }, {\n    path: \"/:id\",\n    component: SubordinateDetail,\n    name: \"SubordinateDetail\",\n    meta: {\n      requiredAuth: true\n    }\n  }]\n});\nrouter.beforeEach(function (to, from, next) {\n  store.dispatch(\"users/fetchAuthUser\").then(function (authUser) {\n    if (to.matched.some(function (record) {\n      return record.meta.requiredAuth;\n    }) && !authUser) {\n      next({\n        name: \"LoginIndex\"\n      });\n    } else {\n      next();\n    }\n  });\n});\nexport default router;","map":{"version":3,"names":["Vue","Router","store","TopIndex","SubordinateIndex","SubordinateDetail","RegisterIndex","LoginIndex","ProfileEdit","EverydayBehaviorRegister","EverydayBehaviorIndex","use","router","mode","routes","path","component","name","meta","requiredAuth","beforeEach","to","from","next","dispatch","then","authUser","matched","some","record"],"sources":["/app/app/javascript/router/index.js"],"sourcesContent":["import Vue from \"vue\";\nimport Router from \"vue-router\";\nimport store from \"../store\";\nimport TopIndex from \"../pages/top\";\nimport SubordinateIndex from \"../pages/subordinates\";\nimport SubordinateDetail from \"../pages/subordinate\";\nimport RegisterIndex from \"../pages/register/index\";\nimport LoginIndex from \"../pages/login/index\";\nimport ProfileEdit from \"../pages/profile/edit\";\nimport EverydayBehaviorRegister from \"../pages/everyday_behaviors/register\";\nimport EverydayBehaviorIndex from \"../pages/everyday_behaviors/index\";\n\nVue.use(Router);\n\nconst router = new Router({\n  mode: \"history\",\n  routes: [\n    {\n      path: \"/\",\n      component: TopIndex,\n      name: \"TopIndex\",\n    },\n    {\n      path: \"/subordinates\",\n      component: SubordinateIndex,\n      name: \"SubordinateIndex\",\n      meta: { requiredAuth: true },\n    },\n    {\n      path: \"/everyday_behavior_register\",\n      component: EverydayBehaviorRegister,\n      name: \"EverydayBehaviorRegister\",\n      meta: { requiredAuth: true },\n    },\n    {\n      path: \"/everyday_behavior_index\",\n      component: EverydayBehaviorIndex,\n      name: \"EverydayBehaviorIndex\",\n      meta: { requiredAuth: true },\n    },\n    {\n      path: \"/register\",\n      component: RegisterIndex,\n      name: \"RegisterIndex\",\n    },\n    {\n      path: \"/login\",\n      component: LoginIndex,\n      name: \"LoginIndex\",\n    },\n    {\n      path: \"/profile_edit\",\n      component: ProfileEdit,\n      name: \"ProfileEdit\",\n      meta: { requiredAuth: true },\n    },\n    {\n      path: \"/:id\",\n      component: SubordinateDetail,\n      name: \"SubordinateDetail\",\n      meta: { requiredAuth: true },\n    },\n  ],\n});\n\nrouter.beforeEach((to, from, next) => {\n  store.dispatch(\"users/fetchAuthUser\").then((authUser) => {\n    if (to.matched.some((record) => record.meta.requiredAuth) && !authUser) {\n      next({ name: \"LoginIndex\" });\n    } else {\n      next();\n    }\n  });\n});\n\nexport default router;\n"],"mappings":"AAAA,OAAOA,GAAG,MAAM,KAAK;AACrB,OAAOC,MAAM,MAAM,YAAY;AAC/B,OAAOC,KAAK,MAAM,UAAU;AAC5B,OAAOC,QAAQ,MAAM,cAAc;AACnC,OAAOC,gBAAgB,MAAM,uBAAuB;AACpD,OAAOC,iBAAiB,MAAM,sBAAsB;AACpD,OAAOC,aAAa,MAAM,yBAAyB;AACnD,OAAOC,UAAU,MAAM,sBAAsB;AAC7C,OAAOC,WAAW,MAAM,uBAAuB;AAC/C,OAAOC,wBAAwB,MAAM,sCAAsC;AAC3E,OAAOC,qBAAqB,MAAM,mCAAmC;AAErEV,GAAG,CAACW,GAAG,CAACV,MAAM,CAAC;AAEf,IAAMW,MAAM,GAAG,IAAIX,MAAM,CAAC;EACxBY,IAAI,EAAE,SAAS;EACfC,MAAM,EAAE,CACN;IACEC,IAAI,EAAE,GAAG;IACTC,SAAS,EAAEb,QAAQ;IACnBc,IAAI,EAAE;EACR,CAAC,EACD;IACEF,IAAI,EAAE,eAAe;IACrBC,SAAS,EAAEZ,gBAAgB;IAC3Ba,IAAI,EAAE,kBAAkB;IACxBC,IAAI,EAAE;MAAEC,YAAY,EAAE;IAAK;EAC7B,CAAC,EACD;IACEJ,IAAI,EAAE,6BAA6B;IACnCC,SAAS,EAAEP,wBAAwB;IACnCQ,IAAI,EAAE,0BAA0B;IAChCC,IAAI,EAAE;MAAEC,YAAY,EAAE;IAAK;EAC7B,CAAC,EACD;IACEJ,IAAI,EAAE,0BAA0B;IAChCC,SAAS,EAAEN,qBAAqB;IAChCO,IAAI,EAAE,uBAAuB;IAC7BC,IAAI,EAAE;MAAEC,YAAY,EAAE;IAAK;EAC7B,CAAC,EACD;IACEJ,IAAI,EAAE,WAAW;IACjBC,SAAS,EAAEV,aAAa;IACxBW,IAAI,EAAE;EACR,CAAC,EACD;IACEF,IAAI,EAAE,QAAQ;IACdC,SAAS,EAAET,UAAU;IACrBU,IAAI,EAAE;EACR,CAAC,EACD;IACEF,IAAI,EAAE,eAAe;IACrBC,SAAS,EAAER,WAAW;IACtBS,IAAI,EAAE,aAAa;IACnBC,IAAI,EAAE;MAAEC,YAAY,EAAE;IAAK;EAC7B,CAAC,EACD;IACEJ,IAAI,EAAE,MAAM;IACZC,SAAS,EAAEX,iBAAiB;IAC5BY,IAAI,EAAE,mBAAmB;IACzBC,IAAI,EAAE;MAAEC,YAAY,EAAE;IAAK;EAC7B,CAAC;AAEL,CAAC,CAAC;AAEFP,MAAM,CAACQ,UAAU,CAAC,UAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,EAAK;EACpCrB,KAAK,CAACsB,QAAQ,CAAC,qBAAqB,CAAC,CAACC,IAAI,CAAC,UAACC,QAAQ,EAAK;IACvD,IAAIL,EAAE,CAACM,OAAO,CAACC,IAAI,CAAC,UAACC,MAAM;MAAA,OAAKA,MAAM,CAACX,IAAI,CAACC,YAAY;IAAA,EAAC,IAAI,CAACO,QAAQ,EAAE;MACtEH,IAAI,CAAC;QAAEN,IAAI,EAAE;MAAa,CAAC,CAAC;IAC9B,CAAC,MAAM;MACLM,IAAI,EAAE;IACR;EACF,CAAC,CAAC;AACJ,CAAC,CAAC;AAEF,eAAeX,MAAM"},"metadata":{},"sourceType":"module"}